{
  "openapi": "3.1.0",
  "info": {
    "title": "Streaming Proxy Integration API",
    "version": "1.0",
    "summary": "API to integrate/Configure the Streaming Proxy",
    "description": "This API allows a streaming proxy to be configured and integrated with an external stream relocation service.",
    "license": {
      "name": "Proprietary",
      "identifier": "LicenseRef-Proprietary"
    },
    "contact": {
      "name": "HelpOn Inc."
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000",
      "description": "Example"
    }
  ],
  "paths": {
    "/v1/provision": {
      "post": {
        "summary": "Add Provisioned Clients",
        "operationId": "post-v1-provision",
        "responses": {
          "200": {
            "description": "# OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "added": {
                      "type": "integer",
                      "description": "The total number of NEW IP addresses added to the provisioned client list.",
                      "minimum": 0
                    }
                  },
                  "required": [
                    "added"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "# Unauthorized\n\nThe Bearer Token is Invalid, request rejected."
          },
          "422": {
            "description": "# Unprocessable Entity\n\nThe parameters of the operation are invalid.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "details": {
                      "type": "string",
                      "description": "The reason why the parameters/body could not be processed."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "# Internal Server Error\n\nAn unexpected error occured in the server adding the clients ip."
          }
        },
        "description": "Advises the proxy which client ip addresses/ranges are authorized to use the proxy.  Only clients which have a public ip address matching the list supplied to this call will be allowed to connect.  The supplied values add to the list of provision clients, and do not replace it.  The same IP address may be added multiple times without error, however the proxy will only add the ip address/range once when first requested.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "ipv4": {
                    "type": "array",
                    "uniqueItems": true,
                    "minItems": 0,
                    "description": "The Array of IPv4 Addresses/Ranges",
                    "items": {
                      "type": "string",
                      "pattern": "^([0-9]{1,3}\\.){3}[0-9]{1,3}(\\/([0-9]|[1-2][0-9]|3[0-2]))?$",
                      "minLength": 7,
                      "maxLength": 18
                    }
                  }
                },
                "required": [
                  "ipv4"
                ]
              },
              "examples": {
                "Provisioning three individual IPv4 and one range": {
                  "value": {
                    "ipv4": [
                      "183.89.192.99",
                      "183.89.192.100",
                      "183.89.192.101",
                      "183.89.193.00/24"
                    ]
                  }
                },
                "Provisioning a single client": {
                  "value": {
                    "ipv4": [
                      "183.89.192.211"
                    ]
                  }
                }
              }
            }
          },
          "description": "An array of client IPv4 Addresses or CIDRs to be added to the allowed list of client addresses."
        },
        "tags": [
          "Client"
        ]
      },
      "parameters": [],
      "get": {
        "summary": "Get Provisioned Clients",
        "operationId": "get-v1-provision",
        "responses": {
          "200": {
            "description": "# OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "ipv4": {
                      "type": "array",
                      "minItems": 0,
                      "uniqueItems": true,
                      "description": "The full list of client ip addresses currently allowed to send traffic through the proxy.",
                      "items": {
                        "type": "string",
                        "pattern": "^([0-9]{1,3}\\.){3}[0-9]{1,3}(\\/([0-9]|[1-2][0-9]|3[0-2]))?$",
                        "minLength": 7,
                        "maxLength": 18
                      }
                    }
                  },
                  "required": [
                    "ipv4"
                  ]
                },
                "examples": {
                  "Three Individual IP Addresses and One Range": {
                    "value": {
                      "ipv4": [
                        "183.89.192.99",
                        "183.89.192.100",
                        "183.89.192.101",
                        "183.89.193.00/24"
                      ]
                    }
                  },
                  "No Clients provisioned": {
                    "value": {
                      "ipv4": []
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "# Unauthorized\n\nThe Bearer Token is Invalid, request rejected."
          },
          "422": {
            "description": "# Unprocessable Entity\n\nThe parameters of the operation are invalid.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "details": {
                      "type": "string",
                      "description": "The reason why the parameters/body could not be processed."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "# Internal Server Error"
          }
        },
        "description": "Get the full current list of provisioned client ip addresses.",
        "tags": [
          "Client"
        ]
      },
      "delete": {
        "summary": "Delete Provisioned Clients",
        "operationId": "delete-v1-provision",
        "responses": {
          "200": {
            "description": "# OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "deleted": {
                      "type": "integer",
                      "description": "The total number of IPv4 addresses/ranges deleted from the list of provisioned clients.",
                      "minimum": 0
                    }
                  },
                  "required": [
                    "deleted"
                  ]
                }
              }
            }
          },
          "401": {
            "description": "# Unauthorized\n\nThe Bearer Token is Invalid, request rejected."
          },
          "422": {
            "description": "# Unprocessable Entity\n\nThe parameters of the operation are invalid.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "details": {
                      "type": "string",
                      "description": "The reason why the parameters/body could not be processed."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "# Internal Server Error\n\nAn unexpected error occured in the server adding the clients ip."
          }
        },
        "description": "Advises the proxy which client ip addresses/ranges are to be de-authorized to use the proxy.  Any IP addresses in the supplied list will no longer be allowed to connect.  If an IP address is attempted to be deleted, that is not provisioned, it will be silently ignored.  Ranges must be deleted as Ranges, individual addresses within a range can not be deleted.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "ipv4": {
                    "type": "array",
                    "uniqueItems": true,
                    "minItems": 0,
                    "description": "The Array of IPv4 Addresses/Ranges",
                    "items": {
                      "type": "string",
                      "pattern": "^([0-9]{1,3}\\.){3}[0-9]{1,3}(\\/([0-9]|[1-2][0-9]|3[0-2]))?$",
                      "minLength": 7,
                      "maxLength": 18
                    }
                  }
                },
                "required": [
                  "ipv4"
                ]
              },
              "examples": {
                "Deleting three individual IPv4 and one range": {
                  "value": {
                    "ipv4": [
                      "183.89.192.99",
                      "183.89.192.100",
                      "183.89.192.101",
                      "183.89.193.00/24"
                    ]
                  }
                },
                "Deleting a single client from the list of provisioned clients.": {
                  "value": {
                    "ipv4": [
                      "183.89.192.211"
                    ]
                  }
                }
              }
            }
          },
          "description": "The list of individual IPv4 addresses or CIDRv4 ranges to be removed from the list of allowed clients."
        },
        "tags": [
          "Client"
        ]
      }
    },
    "/v1/allowed_domains": {
      "put": {
        "summary": "Set List of Allowed Domains",
        "operationId": "v1-domains",
        "responses": {
          "200": {
            "description": "# OK"
          },
          "401": {
            "description": "# Unauthorized\n\nThe Bearer Token is Invalid, request rejected."
          },
          "422": {
            "description": "# Unprocessable Entity\n\nThe parameters of the operation are invalid.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "details": {
                      "type": "string",
                      "description": "The reason why the parameters/body could not be processed."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "# Internal Server Error"
          }
        },
        "description": "Add list of domains that are allowed to be proxied through the server.  This will replace any previous list of acceptable domains which will persist until replaced by another call to this endpoint.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "domains": {
                    "type": "array",
                    "description": "An array of optionally wildcarded domains allowed to be proxied through the proxy.  Domains without a wildcard `*`  *(asterisk)* will match exactly.  Domains with a wildcard will match all domains with the suffix exactly matching the string following the wildcard `*`",
                    "minItems": 1,
                    "items": {
                      "type": "string",
                      "minLength": 1,
                      "pattern": "^\\*?(?:\\.*[a-z0-9\\-]+)*$"
                    }
                  }
                },
                "required": [
                  "domains"
                ]
              },
              "examples": {
                "wildcarded domains": {
                  "value": {
                    "domains": [
                      "www.google.com",
                      "*.facebook.com",
                      "*api.twitter.com"
                    ]
                  }
                }
              }
            }
          },
          "description": "An Array of wildcarded domains the proxy will allow."
        },
        "tags": [
          "Client"
        ]
      },
      "parameters": []
    }
  },
  "components": {
    "schemas": {},
    "securitySchemes": {
      "API_Key": {
        "type": "http",
        "scheme": "bearer",
        "description": "The API Key will be supplied and is to be presented as a Bearer Token for validation with every request."
      }
    },
    "responses": {}
  },
  "security": [
    {
      "API Key - 1": []
    }
  ],
  "tags": [
    {
      "name": "admin"
    },
    {
      "name": "Client"
    }
  ]
}