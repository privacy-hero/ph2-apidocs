openapi: 3.0.1
info:
  title: "Privacy Hero 2 - Mothership API - /auth/delcustomer"
  version: "1.0"
  description: |-
    Privacy Hero 2 API.

    `/auth/delcustomer`
  license:
    name: Copyright Â© 2020 HelpOn Inc. All Rights Reserved
  contact:
    name: API Support
    url: http://www.example.com/support
    email: support@example.com

###### THE SERVERS WHERE THIS API CAN BE USED ############
servers:
  - url: https://{awsid}.execute-api.us-east-1.amazonaws.com/dev
    description: Development URL
    variables:
      awsid:
        default: "999999"
        description: The ID for your dev AWS deployment

components:
  securitySchemes:
    $ref: "../../PH2-API.oas3.yml#/components/securitySchemes"

tags:
  - name: Account Management
    description: Operations related to Account Creation and Management

paths:
  /auth/delcustomer:
    post:
      operationId: deleteCustomer
      tags:
        - Account Management
      summary: Delete a Customer Account.
      description: |-
        Causes an email to be sent to the customer requiring them
        to confirm they wish to mark the account for deletion.

        The Email contains the callback as an embedded link which
        will call back into the initiating application.

        **password**: Optional, Clients Password. Only for systems using
        password for authentication.

        **callback**: The complete URL, minus parameters, which is embedded in
        the email sent to the customer to confirm their account creation. It
        must point to the app which instigated this request.
      security:
        - clientToken: []
          appKey: []

      requestBody:
        required: true
        content:
          "application/json":
            schema:
              type: object
              required:
                - callback
              additionalProperties: false
              properties:
                password:
                  $ref: "../../inc/simpletypes.oas3.yml#/components/schemas/password"
                callback:
                  $ref: "../../inc/simpletypes.oas3.yml#/components/schemas/url"
              example:
                password: "my 4w350m3 p455w0rd"
                callback: "https://www.myapp.url/callback"

      responses:
        "200":
          description: |-
            Confirmation Email sent.
          content:
            application/json:
              schema:
                $ref: "../../inc/response.oas3.yml#/components/schemas/Ack"
              example:
                msg: "Email sent to user, OK."

        "400":
          description: |-
            The Password supplied does not match the Customers known password.
          content:
            application/json:
              schema:
                $ref: "../../inc/response.oas3.yml#/components/schemas/Nack"
              example:
                error: "Invalid Password."
        "401":
          $ref: "../../inc/response.oas3.yml#/components/responses/401"
        "403":
          $ref: "../../inc/response.oas3.yml#/components/responses/403"
        "415":
          $ref: "../../inc/response.oas3.yml#/components/responses/415"
        "429":
          $ref: "../../inc/response.oas3.yml#/components/responses/429"
        "500":
          $ref: "../../inc/response.oas3.yml#/components/responses/500"
        default:
          $ref: "../../inc/response.oas3.yml#/components/responses/default"
